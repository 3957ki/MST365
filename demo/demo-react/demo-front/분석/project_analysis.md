# `demo-front` 프로젝트 페이지별 렌더링 방식 상세 분석

이 문서는 `demo-front` Next.js 프로젝트 내 각 페이지의 렌더링 방식(SSR 또는 CSR)을 분석하고, 해당 방식이 사용된 기술적인 이유를 상세히 설명합니다. 분석은 Next.js App Router 환경을 기준으로 합니다.

---

## 1. `src/app/page.tsx` (메인 페이지)

*   **렌더링 방식**: **SSR (Server Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 부재**: 파일 상단에 `'use client'` 지시어가 없어 Next.js App Router의 기본 동작인 서버 컴포넌트로 처리됩니다.
    *   **클라이언트 Hook 미사용**: `useState`, `useEffect`, `useRouter` 등 클라이언트 환경에서 실행되어야 하는 React Hook을 사용하지 않습니다.
    *   **정적 콘텐츠 중심**: 페이지 내용은 주로 텍스트, 이미지(`next/image`), 그리고 다른 페이지로 이동하는 링크(`next/link`)로 구성되어 있습니다. 이러한 요소들은 서버에서 미리 HTML로 생성하여 클라이언트에 전달하는 것이 효율적입니다.
    *   **SSR 이점 활용**: 서버에서 페이지를 완전히 렌더링하여 전달하므로, 사용자는 초기 콘텐츠를 빠르게 볼 수 있으며 검색 엔진 크롤러가 페이지 내용을 쉽게 인덱싱할 수 있어 SEO에 유리합니다.

---

## 2. `src/app/login/page.tsx` (로그인 페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 파일 상단에 `'use client'`가 명시되어 클라이언트 컴포넌트로 지정되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 사용자 입력(아이디, 비밀번호), 에러 메시지, 로딩 상태 등 동적으로 변하는 상태를 관리합니다.
        *   `useRouter`: 로그인 성공 후 다른 페이지(예: `/board`)로 사용자를 리다이렉션하기 위해 사용됩니다.
    *   **사용자 상호작용 처리**: 사용자가 입력 필드에 값을 입력하고 로그인 버튼을 클릭하는 이벤트(`onSubmit`)를 처리합니다.
    *   **API 호출 및 비동기 처리**: `handleSubmit` 함수 내에서 `login` API를 비동기적으로 호출하고, 성공/실패에 따라 상태를 업데이트하며 사용자에게 피드백(에러 메시지 표시, 리다이렉션)을 제공합니다.
    *   **브라우저 API 사용**: 로그인 성공 시 `localStorage.setItem`을 사용하여 인증 토큰과 사용자 ID를 브라우저 저장소에 저장합니다. 이는 브라우저 환경에서만 가능합니다.
    *   **CSR 필요성**: 사용자 입력에 실시간으로 반응하고, 상태를 관리하며, 비동기 API 호출 결과를 처리하고, 브라우저 저장소를 사용하는 등 클라이언트 측에서의 동적인 로직 처리가 필수적이므로 CSR 방식이 사용됩니다.

---

## 3. `src/app/board/page.tsx` (게시판 목록 페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 클라이언트 컴포넌트로 명시되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 게시물 목록(`boards`), 현재 페이지(`currentPage`), 로딩 상태(`isLoadingInitial`, `isLoadingMore`), 에러 상태(`error`), 추가 데이터 유무(`hasMore`), 인증 토큰(`currentToken`) 등 다양한 상태를 관리합니다.
        *   `useEffect`: 컴포넌트 마운트 시 및 `currentPage`, `currentToken`, `hasMore` 등이 변경될 때 `loadBoards` 함수를 호출하여 게시물 데이터를 비동기적으로 가져옵니다. 또한, 스크롤 이벤트 리스너를 등록하고 해제하는 데 사용됩니다.
        *   `useCallback`: `loadBoards`, `handleScroll` 함수를 메모이제이션하여 불필요한 재생성을 방지하고 성능을 최적화합니다.
        *   `useRouter`: 인증 실패 시 로그인 페이지로 리다이렉션하는 데 사용됩니다.
    *   **동적 데이터 로딩**: 페이지가 로드된 후 `getBoards` API를 호출하여 게시물 목록을 가져옵니다. 사용자가 스크롤하면 추가 데이터를 비동기적으로 로드하는 무한 스크롤 기능이 구현되어 있습니다.
    *   **상태 기반 UI 렌더링**: 로딩 상태, 에러 발생 여부, 게시물 존재 유무에 따라 다른 UI(로딩 메시지, 에러 메시지, 게시물 테이블, "게시물 없음" 메시지 등)를 조건부로 렌더링합니다.
    *   **브라우저 이벤트 처리**: `window.addEventListener('scroll', ...)`을 사용하여 사용자의 스크롤 이벤트를 감지하고 처리합니다.
    *   **CSR 필요성**: 인증 상태 확인, 비동기 데이터 페칭 및 상태 관리, 무한 스크롤 구현을 위한 브라우저 이벤트 처리 등 동적인 기능 구현을 위해 CSR 방식이 필수적입니다.

---

## 4. `src/app/board/[board_id]/page.tsx` (게시판 상세 페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 클라이언트 컴포넌트로 명시되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 게시물 상세 정보(`board`), 댓글 목록(`comments`), 댓글 입력 내용(`commentContent`), 댓글 수정 상태(`editingCommentId`, `editingContent`), 로딩 상태(`isLoading`), 에러 상태(`error`), 404 상태(`isNotFound`), 현재 사용자 ID(`currentUserId`), 삭제 로딩 상태(`isDeleting`) 등 복잡한 상태를 관리합니다.
        *   `useEffect`: 컴포넌트 마운트 시 및 `board_id` 변경 시 `getBoardById` API를 호출하여 게시물 상세 정보를, `getComments` API를 호출하여 댓글 목록을 비동기적으로 가져옵니다.
        *   `useRouter`: 인증 실패 시 로그인 페이지로 리다이렉션하거나, 게시물 삭제 후 목록 페이지로 이동하는 데 사용됩니다.
    *   **동적 데이터 로딩 및 표시**: 페이지 접근 시 URL의 `board_id`를 기반으로 해당 게시물과 댓글 데이터를 API를 통해 가져와 화면에 표시합니다.
    *   **사용자 상호작용 및 CRUD**: 댓글 작성, 수정, 삭제 기능과 게시물 삭제 기능을 제공합니다. 각 기능은 사용자의 클릭 이벤트에 반응하여 해당 API를 호출하고, 성공/실패에 따라 상태를 업데이트하며 UI를 변경합니다.
    *   **조건부 렌더링**: 로딩 상태, 에러 발생 여부, 게시물 존재 여부(404), 현재 로그인한 사용자가 게시물/댓글 작성자인지 여부에 따라 UI 요소(로딩 메시지, 에러 메시지, 수정/삭제 버튼 등)를 다르게 보여줍니다.
    *   **브라우저 API 사용**: `window.confirm` (삭제 확인), `alert` (상태 알림) 등 브라우저 전용 API를 사용합니다.
    *   **CSR 필요성**: 동적인 데이터 로딩(게시물, 댓글), 복잡한 상태 관리, 사용자 상호작용 기반의 CRUD 작업, 조건부 UI 렌더링, 브라우저 API 활용 등 클라이언트 측 로직이 많이 요구되므로 CSR 방식이 사용됩니다.

---

## 5. `src/app/board/[board_id]/edit/page.tsx` (게시판 수정 페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 클라이언트 컴포넌트로 명시되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 수정할 제목(`title`), 내용(`content`), 데이터 로딩 상태(`isLoading`), 로딩 에러(`errorLoading`), 404 상태(`notFound`), 수정 중 상태(`isUpdating`), 수정 에러(`errorUpdating`)를 관리합니다.
        *   `useEffect`: 컴포넌트 마운트 시 `board_id`를 기반으로 `getBoardById` API를 호출하여 기존 게시물 데이터를 가져와 폼의 초기 상태를 설정합니다.
        *   `useRouter`: 인증 실패 시 로그인 페이지로, 수정 성공 시 수정된 게시물 상세 페이지로, 취소 시 이전 페이지로 이동하는 데 사용됩니다.
        *   `useParams`: URL 경로에서 동적인 `board_id` 값을 가져오기 위해 사용됩니다.
    *   **기존 데이터 로딩 및 폼 초기화**: 페이지 접근 시 수정할 게시물의 기존 데이터를 불러와 입력 폼에 미리 채워줍니다.
    *   **사용자 입력 및 폼 처리**: 사용자가 제목과 내용을 수정하면 `useState`를 통해 상태가 업데이트됩니다. 폼 제출(`handleSubmit`) 시 유효성 검사 후 `updateBoard` API를 호출하여 데이터를 수정합니다.
    *   **상태 기반 UI 및 피드백**: 로딩 중, 에러 발생, 404 상태, 수정 중 상태에 따라 다른 UI를 보여주고 사용자에게 적절한 피드백(에러 메시지, 로딩 표시, `alert`)을 제공합니다.
    *   **CSR 필요성**: URL 파라미터 접근, 기존 데이터 비동기 로딩 및 폼 초기화, 사용자 입력 처리 및 상태 관리, 폼 제출 로직, API 호출, 상태 기반 UI 업데이트 등 클라이언트 측 기능이 필수적이므로 CSR 방식이 사용됩니다.

---

## 6. `src/app/board/new/page.tsx` (새 게시물 작성 페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 클라이언트 컴포넌트로 명시되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 사용자가 입력하는 제목(`title`)과 내용(`content`)을 관리합니다.
        *   `useRouter`: 게시물 작성 성공 후 게시판 목록 페이지로 이동하는 데 사용됩니다.
    *   **사용자 입력 및 폼 처리**: 사용자가 제목과 내용을 입력하면 실시간으로 상태가 업데이트됩니다. 폼 제출(`handleSubmit`) 시 입력값 유효성 검사 후 `createBoard` API를 호출하여 새 게시물을 생성합니다.
    *   **인증 확인**: `getToken`, `getUserId`를 통해 로그인 상태를 확인하고, 로그인되지 않은 경우 `alert`를 표시하고 API 호출을 막습니다.
    *   **API 호출 및 피드백**: `createBoard` API 호출 후 성공/실패에 따라 `alert`로 사용자에게 알리고 페이지를 이동시킵니다.
    *   **CSR 필요성**: 사용자 입력 처리, 폼 상태 관리, 폼 제출 로직, API 호출, 인증 확인, 라우팅 등 클라이언트 측에서의 상호작용과 로직 처리가 중심이므로 CSR 방식이 사용됩니다.

---

## 7. `src/app/mypage/page.tsx` (마이페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 클라이언트 컴포넌트로 명시되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 비밀번호 변경 모달 상태(`isModalOpen`), 회원 탈퇴 에러(`withdrawError`) 및 로딩 상태(`isWithdrawing`), 사용자 정보(`user`) 및 로딩/에러 상태, 사용자 게시물(`userPosts`) 및 로딩/에러 상태, 사용자 댓글(`userComments`) 및 로딩/에러 상태 등 매우 다양한 상태를 관리합니다.
        *   `useEffect`: 컴포넌트 마운트 시 로그인 상태를 확인하고, `getUserInfo`, `getUserPosts`, `getUserComments` API를 병렬적으로 호출하여 해당 사용자의 개인화된 데이터를 비동기적으로 가져옵니다. 컴포넌트 언마운트 시 비동기 작업 취소를 위한 클린업 로직도 포함되어 있습니다.
        *   `useRouter`: 로그인되지 않았거나 인증 오류 발생 시 로그인 페이지로, 회원 탈퇴 성공 시 메인 페이지로 이동하는 데 사용됩니다.
    *   **개인화된 동적 데이터 로딩**: 현재 로그인한 사용자의 ID를 기반으로 여러 API를 호출하여 사용자 정보, 작성 게시글 목록, 작성 댓글 목록을 가져와 화면에 표시합니다.
    *   **복합적인 상태 관리 및 상호작용**: 비밀번호 변경 모달을 열고 닫는 기능, 회원 탈퇴 요청 처리 기능 등 여러 상태와 사용자 상호작용을 관리합니다.
    *   **조건부 렌더링 및 에러 처리**: 각 데이터(사용자 정보, 게시글, 댓글)의 로딩 상태와 에러 발생 여부에 따라 적절한 UI(로딩 메시지, 에러 메시지, 실제 데이터 목록)를 표시합니다.
    *   **브라우저 API 사용**: `window.confirm` (회원 탈퇴 확인), `alert` (상태 알림) 등을 사용합니다.
    *   **CSR 필요성**: 여러 API를 통한 개인화된 데이터의 동시 로딩, 복잡한 상태 관리(모달, 로딩, 에러 등), 회원 탈퇴와 같은 중요한 사용자 상호작용 처리, 조건부 UI 렌더링 등 클라이언트 측 로직이 매우 중요하고 복잡하므로 CSR 방식이 사용됩니다.

---

## 8. `src/app/signup/page.tsx` (회원가입 페이지)

*   **렌더링 방식**: **CSR (Client Component)**
*   **상세 분석**:
    *   **`'use client'` 지시어 사용**: 클라이언트 컴포넌트로 명시되었습니다.
    *   **클라이언트 Hook 사용**:
        *   `useState`: 사용자 입력(아이디, 비밀번호, 비밀번호 확인), 비밀번호 일치 에러(`passwordError`), API 에러(`apiError`), 로딩 상태(`isLoading`)를 관리합니다.
        *   `useRouter`: 회원가입 성공 후 로그인 페이지로 이동하는 데 사용됩니다.
    *   **실시간 유효성 검사**: 사용자가 비밀번호 확인 필드를 입력할 때마다 `handleConfirmPasswordChange`, `handlePasswordChange` 함수를 통해 비밀번호 일치 여부를 실시간으로 확인하고 에러 메시지를 표시합니다.
    *   **사용자 입력 및 폼 처리**: 사용자가 입력 필드를 채우고 회원가입 버튼을 클릭하면 `handleSignup` 함수가 실행되어 입력값 유효성 검사 후 `signup` API를 호출합니다.
    *   **API 호출 및 피드백**: `signup` API 호출 결과에 따라 성공/실패 메시지를 `alert` 또는 상태(`apiError`)를 통해 사용자에게 보여주고, 성공 시 페이지를 이동시킵니다.
    *   **CSR 필요성**: 사용자 입력 처리, 실시간 폼 유효성 검사(비밀번호 일치), 폼 제출 로직, API 호출, 상태 기반 피드백 제공, 라우팅 등 클라이언트 측에서의 상호작용과 상태 관리가 필수적이므로 CSR 방식이 사용됩니다.

---

## 종합 결론

`demo-front` 프로젝트는 Next.js App Router의 기능을 활용하여 페이지의 특성에 맞게 **SSR과 CSR을 전략적으로 혼합하여 사용**하고 있습니다.

*   **SSR**: 초기 로딩 속도와 SEO가 중요한 정적 콘텐츠 중심의 메인 페이지(`src/app/page.tsx`)에 적용되었습니다.
*   **CSR**: 사용자 입력, 동적 데이터 로딩, 상태 관리, API 연동, 브라우저 기능 활용 등 클라이언트 측에서의 상호작용과 로직 처리가 필수적인 대부분의 기능 페이지(로그인, 회원가입, 게시판 관련 페이지, 마이페이지)에 적용되었습니다.

이러한 하이브리드 접근 방식은 각 렌더링 전략의 장점을 취하여, 빠른 초기 로딩과 우수한 SEO를 확보하면서도 풍부한 사용자 인터랙션과 동적인 기능을 제공하는 현대적인 웹 애플리케이션을 구축하는 효과적인 방법입니다.
